{"version":3,"names":["children","isGlobalLoading","useGlobal","renderLoading","setRenderLoading","useState","loadingAnimatedValue","useRef","Animated","Value","current","useEffect","anim","timing","toValue","duration","useNativeDriver","start","finished","stop","alignItems","justifyContent","opacity","StyleSheet","absoluteFillObject","backgroundColor"],"sources":["LoadingProvider.js"],"sourcesContent":["import React, { useEffect, useGlobal } from 'reactn';\nimport { Animated, StyleSheet } from 'react-native';\n\nimport { useRef, useState } from 'react';\nimport LoadingSpinner from '../components/LoadingSpinner';\n\nexport default ({ children }) => {\n  const [isGlobalLoading] = useGlobal('_isLoading');\n\n  const [renderLoading, setRenderLoading] = useState(false);\n\n  const loadingAnimatedValue = useRef(new Animated.Value(0)).current;\n\n  useEffect(() => {\n    setRenderLoading(true);\n\n    if (!isGlobalLoading) {\n      return;\n    }\n\n    const anim = Animated.timing(loadingAnimatedValue, {\n      toValue: isGlobalLoading ? 1 : 0,\n      duration: 200,\n      useNativeDriver: true,\n    });\n\n    anim.start(({ finished }) => {\n      if (finished && !isGlobalLoading) {\n        setRenderLoading(false);\n      }\n    });\n\n    return anim.stop;\n  }, [isGlobalLoading]);\n\n  return (\n    <>\n      {children}\n\n      {renderLoading && isGlobalLoading && (\n        <Animated.View\n          style={{\n            alignItems: 'center',\n            justifyContent: 'center',\n            opacity: loadingAnimatedValue,\n            ...StyleSheet.absoluteFillObject,\n            backgroundColor: 'rgba(0,0,0,0.7)',\n          }}\n        >\n          <LoadingSpinner />\n        </Animated.View>\n      )}\n    </>\n  );\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;;;;;;;eAEe,QAAkB;EAAA,IAAjB;IAAEA;EAAF,CAAiB;EAC/B,MAAM,CAACC,eAAD,IAAoB,IAAAC,iBAAA,EAAU,YAAV,CAA1B;EAEA,MAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoC,IAAAC,eAAA,EAAS,KAAT,CAA1C;EAEA,MAAMC,oBAAoB,GAAG,IAAAC,aAAA,EAAO,IAAIC,qBAAA,CAASC,KAAb,CAAmB,CAAnB,CAAP,EAA8BC,OAA3D;EAEA,IAAAC,iBAAA,EAAU,MAAM;IACdP,gBAAgB,CAAC,IAAD,CAAhB;;IAEA,IAAI,CAACH,eAAL,EAAsB;MACpB;IACD;;IAED,MAAMW,IAAI,GAAGJ,qBAAA,CAASK,MAAT,CAAgBP,oBAAhB,EAAsC;MACjDQ,OAAO,EAAEb,eAAe,GAAG,CAAH,GAAO,CADkB;MAEjDc,QAAQ,EAAE,GAFuC;MAGjDC,eAAe,EAAE;IAHgC,CAAtC,CAAb;;IAMAJ,IAAI,CAACK,KAAL,CAAW,SAAkB;MAAA,IAAjB;QAAEC;MAAF,CAAiB;;MAC3B,IAAIA,QAAQ,IAAI,CAACjB,eAAjB,EAAkC;QAChCG,gBAAgB,CAAC,KAAD,CAAhB;MACD;IACF,CAJD;IAMA,OAAOQ,IAAI,CAACO,IAAZ;EACD,CApBD,EAoBG,CAAClB,eAAD,CApBH;EAsBA,oBACE,8DACGD,QADH,EAGGG,aAAa,IAAIF,eAAjB,iBACC,8BAAC,qBAAD,CAAU,IAAV;IACE,KAAK,EAAE;MACLmB,UAAU,EAAE,QADP;MAELC,cAAc,EAAE,QAFX;MAGLC,OAAO,EAAEhB,oBAHJ;MAIL,GAAGiB,uBAAA,CAAWC,kBAJT;MAKLC,eAAe,EAAE;IALZ;EADT,gBASE,8BAAC,uBAAD,OATF,CAJJ,CADF;AAmBD,C"}