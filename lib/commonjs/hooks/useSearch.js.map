{"version":3,"names":["clientAlgolia","algoliasearch","algoliaAppId","algoliaApiKey","useSearch","query","index","documentID","result","setResult","useState","indexAlgolia","setIndexAlgolia","useEffect","initIndex","getSearchResult","length","hits","search","hitsPerPage","map","hit","objectID","e","console","log"],"sources":["useSearch.js"],"sourcesContent":["import {useEffect, useState} from 'reactn';\nimport algoliasearch from 'algoliasearch/lite';\n\nimport {algoliaApiKey, algoliaAppId} from '../config/key';\n\nconst clientAlgolia = algoliasearch(algoliaAppId, algoliaApiKey);\n\nexport default function useSearch({\n  query = '',\n  index = null,\n  documentID = 'objectID',\n}) {\n  const [result, setResult] = useState([]);\n  const [indexAlgolia, setIndexAlgolia] = useState(null);\n\n  useEffect(() => {\n    if (!indexAlgolia) {\n      setIndexAlgolia(clientAlgolia.initIndex(index));\n    }\n\n    return () => {\n      setIndexAlgolia(null);\n    };\n  }, [index]);\n\n  useEffect(() => {\n    if (indexAlgolia) {\n      getSearchResult();\n    }\n  }, [query, indexAlgolia]);\n\n  const getSearchResult = async () => {\n    try {\n      if (query?.length > 1) {\n        const {hits} = await indexAlgolia.search(query, {hitsPerPage: 800});\n\n        setResult(hits.map(hit => ({...hit, [documentID]: hit.objectID})));\n      } else {\n        setResult([]);\n      }\n    } catch (e) {\n      setResult([]);\n      console.log('ALGOLIA' + e);\n    }\n  };\n\n  return result;\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;;;AAEA,MAAMA,aAAa,GAAG,IAAAC,aAAA,EAAcC,iBAAd,EAA4BC,kBAA5B,CAAtB;;AAEe,SAASC,SAAT,OAIZ;EAAA,IAJ+B;IAChCC,KAAK,GAAG,EADwB;IAEhCC,KAAK,GAAG,IAFwB;IAGhCC,UAAU,GAAG;EAHmB,CAI/B;EACD,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsB,IAAAC,gBAAA,EAAS,EAAT,CAA5B;EACA,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkC,IAAAF,gBAAA,EAAS,IAAT,CAAxC;EAEA,IAAAG,iBAAA,EAAU,MAAM;IACd,IAAI,CAACF,YAAL,EAAmB;MACjBC,eAAe,CAACZ,aAAa,CAACc,SAAd,CAAwBR,KAAxB,CAAD,CAAf;IACD;;IAED,OAAO,MAAM;MACXM,eAAe,CAAC,IAAD,CAAf;IACD,CAFD;EAGD,CARD,EAQG,CAACN,KAAD,CARH;EAUA,IAAAO,iBAAA,EAAU,MAAM;IACd,IAAIF,YAAJ,EAAkB;MAChBI,eAAe;IAChB;EACF,CAJD,EAIG,CAACV,KAAD,EAAQM,YAAR,CAJH;;EAMA,MAAMI,eAAe,GAAG,YAAY;IAClC,IAAI;MACF,IAAI,CAAAV,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEW,MAAP,IAAgB,CAApB,EAAuB;QACrB,MAAM;UAACC;QAAD,IAAS,MAAMN,YAAY,CAACO,MAAb,CAAoBb,KAApB,EAA2B;UAACc,WAAW,EAAE;QAAd,CAA3B,CAArB;QAEAV,SAAS,CAACQ,IAAI,CAACG,GAAL,CAASC,GAAG,KAAK,EAAC,GAAGA,GAAJ;UAAS,CAACd,UAAD,GAAcc,GAAG,CAACC;QAA3B,CAAL,CAAZ,CAAD,CAAT;MACD,CAJD,MAIO;QACLb,SAAS,CAAC,EAAD,CAAT;MACD;IACF,CARD,CAQE,OAAOc,CAAP,EAAU;MACVd,SAAS,CAAC,EAAD,CAAT;MACAe,OAAO,CAACC,GAAR,CAAY,YAAYF,CAAxB;IACD;EACF,CAbD;;EAeA,OAAOf,MAAP;AACD"}