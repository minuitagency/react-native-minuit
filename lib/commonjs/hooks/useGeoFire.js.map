{"version":3,"names":["useGeoFire","ref","firebase","center","formatFunction","radius","parameter","geo","geofirex","init","data","setData","useState","useEffect","latitude","longitude","console","log","fetchQuery","customLocation","geoQuery","query","within","point","hits","get","e"],"sources":["useGeoFire.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport * as geofirex from 'geofirex';\n\nconst useGeoFire = ({\n  ref,\n  firebase, // require\n  center,\n  formatFunction = null,\n  radius = 100,\n  parameter = 'point',\n}) => {\n  const geo = geofirex.init(firebase);\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    if (center?.latitude && center?.longitude) {\n      console.log('FETCH');\n      fetchQuery();\n    } else {\n      console.log(center);\n    }\n  }, [center, radius]);\n\n  const fetchQuery = async ({ customLocation = null } = {}) => {\n    try {\n      const geoQuery = geo\n        .query(ref)\n        .within(\n          geo.point(center.latitude, center.longitude),\n          radius,\n          parameter\n        );\n\n      const hits = await geofirex.get(geoQuery);\n      if (formatFunction) {\n        setData(formatFunction(hits));\n      } else {\n        setData(hits);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return { data };\n};\n\nexport default useGeoFire;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA,MAAMA,UAAU,GAAG,QAOb;EAAA,IAPc;IAClBC,GADkB;IAElBC,QAFkB;IAER;IACVC,MAHkB;IAIlBC,cAAc,GAAG,IAJC;IAKlBC,MAAM,GAAG,GALS;IAMlBC,SAAS,GAAG;EANM,CAOd;EACJ,MAAMC,GAAG,GAAGC,QAAQ,CAACC,IAAT,CAAcP,QAAd,CAAZ;EACA,MAAM,CAACQ,IAAD,EAAOC,OAAP,IAAkB,IAAAC,eAAA,EAAS,EAAT,CAAxB;EAEA,IAAAC,gBAAA,EAAU,MAAM;IACd,IAAIV,MAAM,SAAN,IAAAA,MAAM,WAAN,IAAAA,MAAM,CAAEW,QAAR,IAAoBX,MAApB,aAAoBA,MAApB,eAAoBA,MAAM,CAAEY,SAAhC,EAA2C;MACzCC,OAAO,CAACC,GAAR,CAAY,OAAZ;MACAC,UAAU;IACX,CAHD,MAGO;MACLF,OAAO,CAACC,GAAR,CAAYd,MAAZ;IACD;EACF,CAPD,EAOG,CAACA,MAAD,EAASE,MAAT,CAPH;;EASA,MAAMa,UAAU,GAAG,kBAA0C;IAAA,IAAnC;MAAEC,cAAc,GAAG;IAAnB,CAAmC,uEAAP,EAAO;;IAC3D,IAAI;MACF,MAAMC,QAAQ,GAAGb,GAAG,CACjBc,KADc,CACRpB,GADQ,EAEdqB,MAFc,CAGbf,GAAG,CAACgB,KAAJ,CAAUpB,MAAM,CAACW,QAAjB,EAA2BX,MAAM,CAACY,SAAlC,CAHa,EAIbV,MAJa,EAKbC,SALa,CAAjB;MAQA,MAAMkB,IAAI,GAAG,MAAMhB,QAAQ,CAACiB,GAAT,CAAaL,QAAb,CAAnB;;MACA,IAAIhB,cAAJ,EAAoB;QAClBO,OAAO,CAACP,cAAc,CAACoB,IAAD,CAAf,CAAP;MACD,CAFD,MAEO;QACLb,OAAO,CAACa,IAAD,CAAP;MACD;IACF,CAfD,CAeE,OAAOE,CAAP,EAAU;MACVV,OAAO,CAACC,GAAR,CAAYS,CAAZ;IACD;EACF,CAnBD;;EAqBA,OAAO;IAAEhB;EAAF,CAAP;AACD,CA1CD;;eA4CeV,U"}