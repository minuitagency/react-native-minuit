{"version":3,"names":["Linking","cloudInstance","openURL","url","uploadToCloud","uri","path","Promise","resolve","reject","console","log","response","fetch","blob","uploadTask","storage","ref","put","on","snapshot","error","getDownloadURL","e","calcNbOfRating","rating","reduce","t","n","calcRating","numberOfRating","i","toFixed"],"sources":["userActions.js"],"sourcesContent":["import { Linking } from 'react-native';\n\nimport cloudInstance from '../config/cloud';\n\nexport const openURL = (url) => {\n  if (url) {\n    Linking.openURL(url);\n  }\n};\n\nexport function uploadToCloud({ uri, path = null }) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      console.log(path);\n\n      const response = await fetch(uri);\n      const blob = await response.blob();\n\n      const uploadTask = cloudInstance.storage().ref(path).put(blob);\n\n      uploadTask.on(\n        'state_changed',\n        (snapshot) => {\n          console.log(snapshot);\n        },\n        (error) => {\n          reject(error);\n        },\n        async () => {\n          const url = await cloudInstance.storage().ref(path).getDownloadURL();\n\n          resolve({ uri: url });\n        }\n      );\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\n// calc from array of rating [0, 1, 1, 2, 2, 1]\nexport function calcNbOfRating(rating) {\n  return rating?.reduce((t, n) => t + n);\n}\nexport function calcRating(rating) {\n  const numberOfRating = calcNbOfRating(rating);\n  if (numberOfRating === 0) {\n    return 0;\n  }\n  return (rating?.reduce((t, n, i) => t + n * i, 0) / numberOfRating).toFixed(\n    1\n  );\n}\n"],"mappings":"AAAA,SAASA,OAAT,QAAwB,cAAxB;AAEA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,OAAO,MAAMC,OAAO,GAAIC,GAAD,IAAS;EAC9B,IAAIA,GAAJ,EAAS;IACPH,OAAO,CAACE,OAAR,CAAgBC,GAAhB;EACD;AACF,CAJM;AAMP,OAAO,SAASC,aAAT,OAA6C;EAAA,IAAtB;IAAEC,GAAF;IAAOC,IAAI,GAAG;EAAd,CAAsB;EAClD,OAAO,IAAIC,OAAJ,CAAY,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;IAC5C,IAAI;MACFC,OAAO,CAACC,GAAR,CAAYL,IAAZ;MAEA,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAD,CAA5B;MACA,MAAMS,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAT,EAAnB;MAEA,MAAMC,UAAU,GAAGd,aAAa,CAACe,OAAd,GAAwBC,GAAxB,CAA4BX,IAA5B,EAAkCY,GAAlC,CAAsCJ,IAAtC,CAAnB;MAEAC,UAAU,CAACI,EAAX,CACE,eADF,EAEGC,QAAD,IAAc;QACZV,OAAO,CAACC,GAAR,CAAYS,QAAZ;MACD,CAJH,EAKGC,KAAD,IAAW;QACTZ,MAAM,CAACY,KAAD,CAAN;MACD,CAPH,EAQE,YAAY;QACV,MAAMlB,GAAG,GAAG,MAAMF,aAAa,CAACe,OAAd,GAAwBC,GAAxB,CAA4BX,IAA5B,EAAkCgB,cAAlC,EAAlB;QAEAd,OAAO,CAAC;UAAEH,GAAG,EAAEF;QAAP,CAAD,CAAP;MACD,CAZH;IAcD,CAtBD,CAsBE,OAAOoB,CAAP,EAAU;MACVd,MAAM,CAACc,CAAD,CAAN;IACD;EACF,CA1BM,CAAP;AA2BD,C,CAED;;AACA,OAAO,SAASC,cAAT,CAAwBC,MAAxB,EAAgC;EACrC,OAAOA,MAAP,aAAOA,MAAP,uBAAOA,MAAM,CAAEC,MAAR,CAAe,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAA7B,CAAP;AACD;AACD,OAAO,SAASC,UAAT,CAAoBJ,MAApB,EAA4B;EACjC,MAAMK,cAAc,GAAGN,cAAc,CAACC,MAAD,CAArC;;EACA,IAAIK,cAAc,KAAK,CAAvB,EAA0B;IACxB,OAAO,CAAP;EACD;;EACD,OAAO,CAAC,CAAAL,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEC,MAAR,CAAe,CAACC,CAAD,EAAIC,CAAJ,EAAOG,CAAP,KAAaJ,CAAC,GAAGC,CAAC,GAAGG,CAApC,EAAuC,CAAvC,KAA4CD,cAA7C,EAA6DE,OAA7D,CACL,CADK,CAAP;AAGD"}