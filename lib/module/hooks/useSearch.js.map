{"version":3,"names":["useEffect","useState","algoliasearch","algoliaApiKey","algoliaAppId","clientAlgolia","useSearch","query","index","documentID","result","setResult","indexAlgolia","setIndexAlgolia","initIndex","getSearchResult","length","hits","search","hitsPerPage","map","hit","objectID","e","console","log"],"sources":["useSearch.js"],"sourcesContent":["import {useEffect, useState} from 'reactn';\nimport algoliasearch from 'algoliasearch/lite';\n\nimport {algoliaApiKey, algoliaAppId} from '../config/key';\n\nconst clientAlgolia = algoliasearch(algoliaAppId, algoliaApiKey);\n\nexport default function useSearch({\n  query = '',\n  index = null,\n  documentID = 'objectID',\n}) {\n  const [result, setResult] = useState([]);\n  const [indexAlgolia, setIndexAlgolia] = useState(null);\n\n  useEffect(() => {\n    if (!indexAlgolia) {\n      setIndexAlgolia(clientAlgolia.initIndex(index));\n    }\n\n    return () => {\n      setIndexAlgolia(null);\n    };\n  }, [index]);\n\n  useEffect(() => {\n    if (indexAlgolia) {\n      getSearchResult();\n    }\n  }, [query, indexAlgolia]);\n\n  const getSearchResult = async () => {\n    try {\n      if (query?.length > 1) {\n        const {hits} = await indexAlgolia.search(query, {hitsPerPage: 800});\n\n        setResult(hits.map(hit => ({...hit, [documentID]: hit.objectID})));\n      } else {\n        setResult([]);\n      }\n    } catch (e) {\n      setResult([]);\n      console.log('ALGOLIA' + e);\n    }\n  };\n\n  return result;\n}\n"],"mappings":"AAAA,SAAQA,SAAR,EAAmBC,QAAnB,QAAkC,QAAlC;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AAEA,SAAQC,aAAR,EAAuBC,YAAvB,QAA0C,eAA1C;AAEA,MAAMC,aAAa,GAAGH,aAAa,CAACE,YAAD,EAAeD,aAAf,CAAnC;AAEA,eAAe,SAASG,SAAT,OAIZ;EAAA,IAJ+B;IAChCC,KAAK,GAAG,EADwB;IAEhCC,KAAK,GAAG,IAFwB;IAGhCC,UAAU,GAAG;EAHmB,CAI/B;EACD,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBV,QAAQ,CAAC,EAAD,CAApC;EACA,MAAM,CAACW,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,IAAD,CAAhD;EAEAD,SAAS,CAAC,MAAM;IACd,IAAI,CAACY,YAAL,EAAmB;MACjBC,eAAe,CAACR,aAAa,CAACS,SAAd,CAAwBN,KAAxB,CAAD,CAAf;IACD;;IAED,OAAO,MAAM;MACXK,eAAe,CAAC,IAAD,CAAf;IACD,CAFD;EAGD,CARQ,EAQN,CAACL,KAAD,CARM,CAAT;EAUAR,SAAS,CAAC,MAAM;IACd,IAAIY,YAAJ,EAAkB;MAChBG,eAAe;IAChB;EACF,CAJQ,EAIN,CAACR,KAAD,EAAQK,YAAR,CAJM,CAAT;;EAMA,MAAMG,eAAe,GAAG,YAAY;IAClC,IAAI;MACF,IAAI,CAAAR,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAES,MAAP,IAAgB,CAApB,EAAuB;QACrB,MAAM;UAACC;QAAD,IAAS,MAAML,YAAY,CAACM,MAAb,CAAoBX,KAApB,EAA2B;UAACY,WAAW,EAAE;QAAd,CAA3B,CAArB;QAEAR,SAAS,CAACM,IAAI,CAACG,GAAL,CAASC,GAAG,KAAK,EAAC,GAAGA,GAAJ;UAAS,CAACZ,UAAD,GAAcY,GAAG,CAACC;QAA3B,CAAL,CAAZ,CAAD,CAAT;MACD,CAJD,MAIO;QACLX,SAAS,CAAC,EAAD,CAAT;MACD;IACF,CARD,CAQE,OAAOY,CAAP,EAAU;MACVZ,SAAS,CAAC,EAAD,CAAT;MACAa,OAAO,CAACC,GAAR,CAAY,YAAYF,CAAxB;IACD;EACF,CAbD;;EAeA,OAAOb,MAAP;AACD"}