{"version":3,"names":["useState","useEffect","geofirex","useGeoFire","ref","firebase","center","formatFunction","radius","parameter","geo","init","data","setData","latitude","longitude","console","log","fetchQuery","customLocation","geoQuery","query","within","point","hits","get","e"],"sources":["useGeoFire.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport * as geofirex from 'geofirex';\n\nconst useGeoFire = ({\n  ref,\n  firebase, // require\n  center,\n  formatFunction = null,\n  radius = 100,\n  parameter = 'point',\n}) => {\n  const geo = geofirex.init(firebase);\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    if (center?.latitude && center?.longitude) {\n      console.log('FETCH');\n      fetchQuery();\n    } else {\n      console.log(center);\n    }\n  }, [center, radius]);\n\n  const fetchQuery = async ({ customLocation = null } = {}) => {\n    try {\n      const geoQuery = geo\n        .query(ref)\n        .within(\n          geo.point(center.latitude, center.longitude),\n          radius,\n          parameter\n        );\n\n      const hits = await geofirex.get(geoQuery);\n      if (formatFunction) {\n        setData(formatFunction(hits));\n      } else {\n        setData(hits);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return { data };\n};\n\nexport default useGeoFire;\n"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;;AAEA,MAAMC,UAAU,GAAG,QAOb;EAAA,IAPc;IAClBC,GADkB;IAElBC,QAFkB;IAER;IACVC,MAHkB;IAIlBC,cAAc,GAAG,IAJC;IAKlBC,MAAM,GAAG,GALS;IAMlBC,SAAS,GAAG;EANM,CAOd;EACJ,MAAMC,GAAG,GAAGR,QAAQ,CAACS,IAAT,CAAcN,QAAd,CAAZ;EACA,MAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,EAAD,CAAhC;EAEAC,SAAS,CAAC,MAAM;IACd,IAAIK,MAAM,SAAN,IAAAA,MAAM,WAAN,IAAAA,MAAM,CAAEQ,QAAR,IAAoBR,MAApB,aAAoBA,MAApB,eAAoBA,MAAM,CAAES,SAAhC,EAA2C;MACzCC,OAAO,CAACC,GAAR,CAAY,OAAZ;MACAC,UAAU;IACX,CAHD,MAGO;MACLF,OAAO,CAACC,GAAR,CAAYX,MAAZ;IACD;EACF,CAPQ,EAON,CAACA,MAAD,EAASE,MAAT,CAPM,CAAT;;EASA,MAAMU,UAAU,GAAG,kBAA0C;IAAA,IAAnC;MAAEC,cAAc,GAAG;IAAnB,CAAmC,uEAAP,EAAO;;IAC3D,IAAI;MACF,MAAMC,QAAQ,GAAGV,GAAG,CACjBW,KADc,CACRjB,GADQ,EAEdkB,MAFc,CAGbZ,GAAG,CAACa,KAAJ,CAAUjB,MAAM,CAACQ,QAAjB,EAA2BR,MAAM,CAACS,SAAlC,CAHa,EAIbP,MAJa,EAKbC,SALa,CAAjB;MAQA,MAAMe,IAAI,GAAG,MAAMtB,QAAQ,CAACuB,GAAT,CAAaL,QAAb,CAAnB;;MACA,IAAIb,cAAJ,EAAoB;QAClBM,OAAO,CAACN,cAAc,CAACiB,IAAD,CAAf,CAAP;MACD,CAFD,MAEO;QACLX,OAAO,CAACW,IAAD,CAAP;MACD;IACF,CAfD,CAeE,OAAOE,CAAP,EAAU;MACVV,OAAO,CAACC,GAAR,CAAYS,CAAZ;IACD;EACF,CAnBD;;EAqBA,OAAO;IAAEd;EAAF,CAAP;AACD,CA1CD;;AA4CA,eAAeT,UAAf"}